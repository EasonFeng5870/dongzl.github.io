<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">

    

    

    <title>10-MySQL-InnoDB-Transaction | 善积跬步 方以千里</title>
    <meta name="author" content="dongzl">
    <meta name="version" content="1.0.0">
    <meta name="keywords" content>
    <meta name="description" content="背景描述目前在维护的 APP 进行了整体重构（其实不能算重构，应该是重新开发），新的服务端系统根据业务场景进行了功能拆分，实现了微服务，结束了以前服务端大一统的部署模式；伴随着微服务的上线，分布式事务也成了一个绕不开的问题。最近的几篇文章计划结合目前项目中的分布式事务的代码实现逻辑，对数据库事务的知识进行系统的学习和整理，当然数据库事务方面的知识很多，所以肯定不是一篇文章可以搞定的，分布式 就是要 “分布试”。PS.数据库事务的知识有哪些，一起来整理一下，今天先以 MySQL 数据库 I...">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">

    
    <link rel="alternate" href="/atom.xml" title="善积跬步 方以千里" type="application/atom+xml">
    
    
    <link rel="icon" href="/images/favicon.ico">
    

    <link rel="stylesheet" href="/css/style.css"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>
<body>

    <!-- hexo-inject:begin --><!-- hexo-inject:end --><main class="app">
        <header class="header clearfix">
    <div id="nav" class="nav">
    <div class="nav-mobile">
        <button id="open-panel" class="open-panel nav-mobile-item"><i class="icon-documents"></i></button>
        <h1 class="nav-mobile-title nav-mobile-item">善积跬步 方以千里</h1>
        <button id="open-menus" class="open-panel nav-mobile-item"><i class="icon-library"></i></button>
    </div>

    <nav id="nav-inner" class="nav-inner">
        
            <a class="nav-item" href="/">
                <span class="nav-text">首页</span>
            </a>
        
            <a class="nav-item" href="/categories/java">
                <span class="nav-text">Java</span>
            </a>
        
            <a class="nav-item" href="/categories/web">
                <span class="nav-text">web</span>
            </a>
        
            <a class="nav-item" href="/categories/database">
                <span class="nav-text">数据库</span>
            </a>
        
            <a class="nav-item" href="/categories/data-structures-algorithms">
                <span class="nav-text">算法</span>
            </a>
        
            <a class="nav-item" href="/categories/architectural-design">
                <span class="nav-text">架构</span>
            </a>
        
            <a class="nav-item" href="/categories/design-pattern">
                <span class="nav-text">设计模式</span>
            </a>
        
            <a class="nav-item" href="/categories/other">
                <span class="nav-text">其他</span>
            </a>
        
            <a class="nav-item" href="/categories">
                <span class="nav-text">分类</span>
            </a>
        
            <a class="nav-item" href="/tags">
                <span class="nav-text">标签</span>
            </a>
        
            <a class="nav-item" href="/archives">
                <span class="nav-text">归档</span>
            </a>
        
            <a class="nav-item" href="/about">
                <span class="nav-text">关于</span>
            </a>
        
    </nav>
</div>

    <aside id="aside" class="aside">
    <div id="aside-mask" class="aside-mask"></div>
    <div id="aside-inner" class="aside-inner">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="icon-search-stroke"></i></button><input type="hidden" name="sitesearch" value="https://dongzl.github.io"></form>

        
        
        
        

        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#背景描述"><span class="toc-number">1.</span> <span class="toc-text">背景描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务的ACID特性"><span class="toc-number">2.</span> <span class="toc-text">事务的ACID特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#A：原子性（Atomicity）"><span class="toc-number">2.1.</span> <span class="toc-text">A：原子性（Atomicity）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C：一致性（Consistency）"><span class="toc-number">2.2.</span> <span class="toc-text">C：一致性（Consistency）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#I：隔离性（Isolation）"><span class="toc-number">2.3.</span> <span class="toc-text">I：隔离性（Isolation）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#D：持久性（Durability）"><span class="toc-number">2.4.</span> <span class="toc-text">D：持久性（Durability）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务的并发一致性问题"><span class="toc-number">3.</span> <span class="toc-text">事务的并发一致性问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#丢失更新"><span class="toc-number">3.1.</span> <span class="toc-text">丢失更新</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#第一类丢失更新"><span class="toc-number">3.1.1.</span> <span class="toc-text">第一类丢失更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#第二类丢失更新"><span class="toc-number">3.1.2.</span> <span class="toc-text">第二类丢失更新</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#脏读"><span class="toc-number">3.2.</span> <span class="toc-text">脏读</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不可重复读"><span class="toc-number">3.3.</span> <span class="toc-text">不可重复读</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#幻读（幻影读）"><span class="toc-number">3.4.</span> <span class="toc-text">幻读（幻影读）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结说明"><span class="toc-number">3.5.</span> <span class="toc-text">总结说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务隔离级别"><span class="toc-number">4.</span> <span class="toc-text">事务隔离级别</span></a></li></ol>
        
    </div>
</aside>

</header>

        <div id="content" class="content"><article class="article" itemscope itemprop="blogPost">
    
    <header class="article-header">
        
        <h1 itemprop="name">
            10-MySQL-InnoDB-Transaction
        </h1>
        
        <div class="article-meta clearfix">
            <a class="article-date" href="https://dongzl.github.io/2019/11/19/10-MySQL-InnoDB-Transaction/index.html">
    
    <i class="icon-calendar"></i>
    
    <time datetime="2019-11-19T11:08:31.000Z" itemprop="datePublished">2019-11-19</time>
</a>

            
<div class="article-tag-list">
    <i class="icon-tag"></i>
    <a class="article-tag-link" href="/tags/ACID/">ACID</a>, <a class="article-tag-link" href="/tags/事务隔离级别/">事务隔离级别</a>, <a class="article-tag-link" href="/tags/并发一致性问题/">并发一致性问题</a>, <a class="article-tag-link" href="/tags/数据库事务/">数据库事务</a>
</div>


        </div>
    </header>
    
    <section class="article-body markdown-body">
        
        <h2 id="背景描述"><a href="#背景描述" class="headerlink" title="背景描述"></a>背景描述</h2><p>目前在维护的 APP 进行了整体重构（其实不能算重构，应该是重新开发），新的服务端系统根据业务场景进行了功能拆分，实现了微服务，结束了以前服务端大一统的部署模式；伴随着微服务的上线，分布式事务也成了一个绕不开的问题。最近的几篇文章计划结合目前项目中的分布式事务的代码实现逻辑，对数据库事务的知识进行系统的学习和整理，当然数据库事务方面的知识很多，所以肯定不是一篇文章可以搞定的，<strong>分布式</strong> 就是要 <strong>“分布试”</strong>。</p>
<p><strong>PS.数据库事务的知识有哪些，一起来整理一下，今天先以 MySQL 数据库 InnoDB 存储引擎为例，总结一下单数据库事务。</strong></p>
<a id="more"></a>

<h2 id="事务的ACID特性"><a href="#事务的ACID特性" class="headerlink" title="事务的ACID特性"></a>事务的ACID特性</h2><h3 id="A：原子性（Atomicity）"><a href="#A：原子性（Atomicity）" class="headerlink" title="A：原子性（Atomicity）"></a>A：原子性（Atomicity）</h3><p>事务被视为不可分割的最小单元，事务的所有操作要么全部提交成功，要么全部失败回滚。</p>
<h3 id="C：一致性（Consistency）"><a href="#C：一致性（Consistency）" class="headerlink" title="C：一致性（Consistency）"></a>C：一致性（Consistency）</h3><p>一致性指事务将数据库从一种状态转变为下一种一致的状态。在事务开始之前和事务结束之后，数据库的完整性约束没有被破坏。在一致性状态下，所有事务对一个数据的读取结果都是相同的。</p>
<h3 id="I：隔离性（Isolation）"><a href="#I：隔离性（Isolation）" class="headerlink" title="I：隔离性（Isolation）"></a>I：隔离性（Isolation）</h3><p>一个事务所做的修改在最终提交以前，对其它事务是不可见的。</p>
<h3 id="D：持久性（Durability）"><a href="#D：持久性（Durability）" class="headerlink" title="D：持久性（Durability）"></a>D：持久性（Durability）</h3><p>一旦事务提交，则其所做的修改将会永远保存到数据库中。即使系统发生崩溃，事务的执行结果页不能丢失。</p>
<h2 id="事务的并发一致性问题"><a href="#事务的并发一致性问题" class="headerlink" title="事务的并发一致性问题"></a>事务的并发一致性问题</h2><h3 id="丢失更新"><a href="#丢失更新" class="headerlink" title="丢失更新"></a>丢失更新</h3><h4 id="第一类丢失更新"><a href="#第一类丢失更新" class="headerlink" title="第一类丢失更新"></a>第一类丢失更新</h4><p>一个事务（A）更新某条记录数据，此时还未提交，这时另外一个事务（B）也更新了该记录数据并提交事务成功，这时 A 撤销事务，此时 B 更新成功的数据会丢失。</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>事务A</th>
<th>事务B</th>
</tr>
</thead>
<tbody><tr>
<td>T1</td>
<td>开启事务</td>
<td></td>
</tr>
<tr>
<td>T2</td>
<td></td>
<td>开启事务</td>
</tr>
<tr>
<td>T3</td>
<td>查询账户余额为 100</td>
<td></td>
</tr>
<tr>
<td>T4</td>
<td></td>
<td>查询账户余额为 100</td>
</tr>
<tr>
<td>T5</td>
<td></td>
<td>更新数据 + 10 结果为 110</td>
</tr>
<tr>
<td>T6</td>
<td></td>
<td>提交事务</td>
</tr>
<tr>
<td>T7</td>
<td>更新数据 - 10 结果为 90</td>
<td></td>
</tr>
<tr>
<td>T8</td>
<td>撤销事务</td>
<td></td>
</tr>
<tr>
<td>T7</td>
<td>数据恢复为100（丢失更新）</td>
<td></td>
</tr>
</tbody></table>
<h4 id="第二类丢失更新"><a href="#第二类丢失更新" class="headerlink" title="第二类丢失更新"></a>第二类丢失更新</h4><p>一个事务（A）更新某条记录数据，此时还未提交，这时另外一个事务（B）也更新了该记录数据并提交事务成功，此时 A 提交事务，此时 B 更新成功的数据会丢失。</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>事务A</th>
<th>事务B</th>
</tr>
</thead>
<tbody><tr>
<td>T1</td>
<td>开启事务</td>
<td></td>
</tr>
<tr>
<td>T2</td>
<td></td>
<td>开启事务</td>
</tr>
<tr>
<td>T3</td>
<td>查询账户余额为100</td>
<td></td>
</tr>
<tr>
<td>T4</td>
<td></td>
<td>查询账户余额为100</td>
</tr>
<tr>
<td>T5</td>
<td></td>
<td>更新数据 - 10 结果为 90</td>
</tr>
<tr>
<td>T6</td>
<td></td>
<td>提交事务</td>
</tr>
<tr>
<td>T7</td>
<td>更新数据 + 10 结果 为 110</td>
<td></td>
</tr>
<tr>
<td>T8</td>
<td>提交事务</td>
<td></td>
</tr>
<tr>
<td>T7</td>
<td>数据结果为110（丢失更新）</td>
<td></td>
</tr>
</tbody></table>
<h3 id="脏读"><a href="#脏读" class="headerlink" title="脏读"></a>脏读</h3><p>脏读是指一个事务读取到了另外一个事务未提交的数据。一个事务正在对一条记录进行修改，在这个事务提交并完成前，这条记录的数据就处于不一致状态。这时， 另一个事务也来读取同一条记录，如果不加控制，第二个事务读取了这些“脏”数据，并据此做进一步的处理，就会产生未提交的数据依赖关系。</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>事务A</th>
<th>事务B</th>
</tr>
</thead>
<tbody><tr>
<td>T1</td>
<td>开启事务</td>
<td></td>
</tr>
<tr>
<td>T2</td>
<td>查询账户余额为100</td>
<td>开启事务</td>
</tr>
<tr>
<td>T3</td>
<td>充值50，余额修改为150</td>
<td></td>
</tr>
<tr>
<td>T4</td>
<td></td>
<td>查询余额为150</td>
</tr>
<tr>
<td>T5</td>
<td>撤销事务，余额改回100</td>
<td></td>
</tr>
<tr>
<td>T6</td>
<td></td>
<td>汇入50，余额修改为200</td>
</tr>
<tr>
<td>T7</td>
<td></td>
<td>提交事务</td>
</tr>
</tbody></table>
<h3 id="不可重复读"><a href="#不可重复读" class="headerlink" title="不可重复读"></a>不可重复读</h3><p>不可重复读是指一个事务读取到了另外一个事务已提交的数据。一个事务（A）读取某一个数据后，另外一个事务（B）对该数据进行了修改，当 A 再读取这个数据时，发现前后两次读取的数据不一致。</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>事务A</th>
<th>事务B</th>
</tr>
</thead>
<tbody><tr>
<td>T1</td>
<td>开启事务</td>
<td></td>
</tr>
<tr>
<td>T2</td>
<td>查询账户余额为100</td>
<td>开启事务</td>
</tr>
<tr>
<td>T3</td>
<td></td>
<td>更新账户余额为150</td>
</tr>
<tr>
<td>T4</td>
<td></td>
<td>提交事务</td>
</tr>
<tr>
<td>T5</td>
<td>查询账户余额为150</td>
<td></td>
</tr>
<tr>
<td>T6</td>
<td>…</td>
<td></td>
</tr>
<tr>
<td>T7</td>
<td>提交事务</td>
<td></td>
</tr>
</tbody></table>
<h3 id="幻读（幻影读）"><a href="#幻读（幻影读）" class="headerlink" title="幻读（幻影读）"></a>幻读（幻影读）</h3><p>一个事务（A）按某一条件检索到 N 条数据，另外一个事务（B）新增或删除了满足条件的数据，这时 A 再按相同条件检索数据，查询到的结果 != N。</p>
<table>
<thead>
<tr>
<th>时间</th>
<th>事务A</th>
<th>事务B</th>
</tr>
</thead>
<tbody><tr>
<td>T1</td>
<td>开启事务</td>
<td>开启事务</td>
</tr>
<tr>
<td>T2</td>
<td>select * from table where condition = ‘xxx’ 返回 N 条记录</td>
<td></td>
</tr>
<tr>
<td>T3</td>
<td></td>
<td>向 table 表插入一条满足 condition = ‘xxx’ 的数据</td>
</tr>
<tr>
<td>T4</td>
<td></td>
<td>提交事务</td>
</tr>
<tr>
<td>T5</td>
<td>select * from table where condition = ‘xxx’ 返回 N + 1 条记录</td>
<td></td>
</tr>
<tr>
<td>T6</td>
<td>…</td>
<td></td>
</tr>
<tr>
<td>T7</td>
<td>提交事务</td>
<td></td>
</tr>
</tbody></table>
<h3 id="总结说明"><a href="#总结说明" class="headerlink" title="总结说明"></a>总结说明</h3><ul>
<li><p>幻读和不可重复读的区别：</p>
<ul>
<li>不可重复读的重点是更新：在同一事务中，相同的条件，第一次和第二次读取到的数据不一致（中间有其它事务提交了更新）；</li>
<li>幻读的重点是新增或删除：在同一事务中，相同的条件，第一次和第二次读到的记录数据不一样（中间有其它事务提交了新增或者删除）。</li>
</ul>
</li>
<li><p>两类丢失更新问题：</p>
<ul>
<li>第一类丢失更新 （通过设置 <strong>Repeatable Read</strong> 隔离级别解决）</li>
<li>第二类丢失更新 （需要应用程序控制，使用乐观锁解决）</li>
</ul>
</li>
</ul>
<h2 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h2><p>SQL 标准定义了四种数据库事务的隔离级别，每一种级别中都规定了一个事务中所做的修改，哪些在事务内和事务间是可见的，哪些是不可见的。</p>
<ul>
<li>Read Uncommitted：所有事务都可以看到其它事务未提交的执行结果。</li>
<li>Read Committed（RC）：一个事务能够看到其它事务已提交的执行结果。</li>
<li>Repeatable Read（RR）：在一个事务内多次执行同一个查询操作，前后几次获取的结果相同。</li>
<li>Serializable：串行化，每次读都需要获得表级共享锁，读写相互阻塞。</li>
</ul>
<table>
<thead>
<tr>
<th>隔离级别</th>
<th>脏读</th>
<th>不可重复读</th>
<th>幻读</th>
</tr>
</thead>
<tbody><tr>
<td>Read Uncommitted</td>
<td>YES</td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td>Read Committed</td>
<td>NO</td>
<td>YES</td>
<td>YES</td>
</tr>
<tr>
<td>Repeatable Read</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
</tr>
<tr>
<td>Serializable</td>
<td>NO</td>
<td>NO</td>
<td>NO</td>
</tr>
</tbody></table>
<p>四种数据库事务的隔离级别只是 SQL 标准的定义，对于不同的数据库也会有不同的实现，比如：Oracle 仅支持 Read Committed 和 Serializable 隔离级别，其中 Read Committed 是默认的隔离级别；对于 MySQL 支持 SQL 标准的四种隔离级别，其中 Repeatable Read 为默认的隔离级别。</p>
<p><a href="https://github.com/ctripcorp/apollo/wiki/Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97#1241-environment" target="_blank" rel="noopener">https://github.com/ctripcorp/apollo/wiki/Java%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97#1241-environment</a></p>
<p><a href="https://github.com/ctripcorp/apollo/wiki/Apollo%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0" target="_blank" rel="noopener">https://github.com/ctripcorp/apollo/wiki/Apollo%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0</a></p>
<p><a href="https://www.jianshu.com/p/03d1bf80f7e8" target="_blank" rel="noopener">https://www.jianshu.com/p/03d1bf80f7e8</a></p>
<p><a href="https://blog.csdn.net/z69183787/article/details/52213670" target="_blank" rel="noopener">https://blog.csdn.net/z69183787/article/details/52213670</a></p>
<p><a href="https://www.jianshu.com/p/592b2cdbc589" target="_blank" rel="noopener">https://www.jianshu.com/p/592b2cdbc589</a></p>
<p><a href="https://www.jianshu.com/p/d829df873332" target="_blank" rel="noopener">https://www.jianshu.com/p/d829df873332</a></p>
<p><a href="https://blog.csdn.net/weixin_28760063/article/details/81369266" target="_blank" rel="noopener">https://blog.csdn.net/weixin_28760063/article/details/81369266</a></p>
<p><a href="https://juejin.im/post/5b5a0bf9f265da0f6523913b" target="_blank" rel="noopener">https://juejin.im/post/5b5a0bf9f265da0f6523913b</a></p>

        
    </section>
</article>



<div class="comments">
    <div id="comments"></div>
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
    new Gitalk({
        clientID: "791785cb3bf7b9b5f1ea",
        clientSecret: "a73d2380b7dba08575e0190989ef017e480c20c9",
        repo: "dongzl.github.io",
        owner: "dongzl",
        admin: ["dongzl"],
        id: "2019/11/19/10-MySQL-InnoDB-Transaction",
        distractionFreeMode: true,
        title: "10-MySQL-InnoDB-Transaction",
        body: "https://dongzl.github.io/2019/11/19/10-MySQL-InnoDB-Transaction/",
        labels: ["数据库事务","事务隔离级别","ACID","并发一致性问题"]
    }).render('comments');
    </script>
</div>

</div>
        <footer class="footer">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme by <a href="https://github.com/sanonz/hexo-theme-concise" target="_blank">Concise</a>

    
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?e4027971a230b210f4671f485b33846a";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    
</footer>


  <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>

    </main>

    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var nodes = {
            nav: $('#nav'),
            aside: $('#aside'),
            asideInner: $('#aside-inner'),
            navInner: $('#nav-inner')
        };

        var doing = false;
        nodes.asideInner.on('webkitAnimationEnd mozAnimationEnd oAnimationEnd oanimationend animationend', function() {
            if (nodes.aside.hasClass('mobile-open')) {
                nodes.aside.removeClass('mobile-open');
            } else {
                nodes.aside.removeClass('mobile-close panel-show');
            }
            doing = false;
        });
        $('#open-panel, #aside-mask').on('click', function() {
            if (doing) {
                return;
            }
            
            if (nodes.aside.hasClass('panel-show')) {
                nodes.aside.addClass('mobile-close');
            } else {
                nodes.aside.addClass('mobile-open panel-show');
            }
        });
        $('#open-menus').on('click', function() {
            nodes.navInner.slideToggle();
        });

        if (window.innerWidth <= 960) {
            setTimeout(function() {
                nodes.navInner.slideUp();
            }, 3000);
        }
    });
    </script>
    
        <script type="text/javascript" src="/js/scrollspy.min.js"></script>
        <script type="text/javascript">
        $(document.body).scrollspy({target: '#aside-inner'});
        </script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\\\(","\\\\)"]],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
    

</body>
</html>
